{% extends "base.html" %}

{% block title %}Trang chá»§ - Tá»§ láº¡nh cá»§a tÃ´i{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h1 style="margin: 0;">ðŸ§Š Danh sÃ¡ch thá»±c pháº©m</h1>
    <a href="{{ url_for('add_food') }}" style="background: #28a745; color: white; padding: 12px 20px; text-decoration: none; border-radius: 5px; font-weight: bold;">
        <i class="fas fa-plus"></i> ThÃªm thá»±c pháº©m
    </a>
</div>

<style>
    .food-table { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .food-table th, .food-table td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
    .food-table th { background: #f2f2f2; font-weight: bold; color: #333; }
    .btn-action { padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 13px; margin-right: 5px; }
    .btn-edit { background: #ffc107; color: #000; }
    .btn-delete { background: #dc3545; color: #fff; }
</style>

<table class="food-table">
    <thead>
        <tr>
            <th>TÃªn thá»±c pháº©m</th>
            <th>Sá»‘ lÆ°á»£ng</th>
            <th>Vá»‹ trÃ­</th>
            <th>Háº¡n sá»­ dá»¥ng</th>
            <th>HÃ nh Ä‘á»™ng</th>
        </tr>
    </thead>
    <tbody>
        {% for food in foods %}
        <tr>
            <td><strong>{{ food.name }}</strong></td>
            <td>
                {% if food.unit in ['Quáº£', 'Há»™p', 'CÃ¡i', 'Chai', 'GÃ³i'] %}
                    {{ food.quantity | int }}
                {% else %}
                    {% if food.quantity % 1 == 0 %}
                        {{ food.quantity | int }}
                    {% else %}
                        {{ food.quantity }}
                    {% endif %}
                {% endif %}
                {{ food.unit }}
            </td>
            <td><i class="fas fa-location-dot" style="color: #999;"></i> {{ food.location }}</td>
            <td>
                {% set days_left = (food.expiration_date - today).days %}
                {% if days_left > 3 %}
                    <span style="color: #28a745; font-weight: bold;">CÃ²n {{ days_left }} ngÃ y</span>
                {% elif days_left > 0 %}
                    <span style="color: #fd7e14; font-weight: bold;">Chá»‰ cÃ²n {{ days_left }} ngÃ y</span>
                {% elif days_left == 0 %}
                    <span style="color: #dc3545; font-weight: bold;">Háº¾T Háº N HÃ”M NAY!</span>
                {% else %}
                    <span style="color: gray; font-style: italic;">QuÃ¡ háº¡n {{ days_left | abs }} ngÃ y</span>
                {% endif %}
                <div style="font-size: 0.8em; color: #999;">({{ food.expiration_date.strftime('%d/%m/%Y') }})</div>
            </td>
            <td>
                <a href="{{ url_for('edit_food', id=food.id) }}" class="btn-action btn-edit">Sá»­a</a>
                <a href="{{ url_for('delete_food', id=food.id) }}" class="btn-action btn-delete" 
                   onclick="return confirm('Báº¡n cháº¯c cháº¯n muá»‘n xÃ³a {{ food.name }}?');">XÃ³a</a>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="5" style="text-align: center; color: #666; padding: 40px;">Tá»§ láº¡nh Ä‘ang trá»‘ng! HÃ£y Ä‘i chá»£ nÃ o.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}